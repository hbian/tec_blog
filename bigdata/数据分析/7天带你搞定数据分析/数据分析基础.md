## 数据分析面对的问题
* 缺乏对业务的理解，更多的是被动做事。
很多分析师在做事的时候，充当老好人，别人提什么都做，上班非常忙，成为别人口中的好好先生。自己也想自我提升，但没时间，因为你的时间掌握在了别人手中。

* 对数据分析的理解片面化，更多的还是停留在工具层面。
Python、Tableau、Java 这些工具都有，大数据是很好，但如果不解决业务问题，你玩得再花，都是空架子。

**数据分析不是简单的工具使用和重复的数据处理，数据分析的本质是：从大量事物中发现关键信息，用于直接决策，而不是辅助。**

## 如何解决临时提数需求
数据分析师发展的三个方向:
* 业务型：业务型对分析师的业务理解能力要求非常高。
* 数据研发型：这个发展方向要求你对技术非常熟练，能够通过技术对数据进行分析。
* 算法型：算法型要求你数学功底要好，而且课题的研究能力非常强。


### 日/周/月报
分析日报主要有三个目的：
* 了解业务现状: 
* 培养数据敏感性: 敏感性都是慢慢培养出来的，没有人天生就对具体业务敏感。如果你可以每天关注数据的波动，潜移默化的便会培养一定的敏感性。
* 提供业务发展建议: 数据波动时肯定需要寻找波动原因，为何涨跌，久而久之你就会发现产品或运营在做出何种调整后数据会出现涨跌，进而能够为业务发展提供更合理的发展建议。
周报就可以看作是一个短期趋势了。
数据敏感性和业务的发展建议都是从日报/周报/月报的分析总结中不断积累的，
作为一名优秀的数据分析师一定要经常看三种报，培养自身的敏感性，从而找到获取业务增长的发力点。

临时提数需求分为两种：
* 对于高管层的临时提数需求，优先级肯定是最高。但此时一定不能立马去做，而是需要思考为何需要这个数据，通过这个数据能进行什么决策。举个例子，CEO 现在正在与外部公司商谈合作事宜，需要了解用户人均时长，如果你不知道这个背景前提，给出的数据往往有误，这时需要及时的与领导进行沟通。
* 业务线的临时提数需求是非常繁多的，比如数据指标口径、数据增长计算，等等，这时就需要你根据自身的实际工作情况合理安排，学会合理地拒绝一些业务线可以自己解决的事情，不断提升自己的工作价值，而现实情况往往是大部分数据分析师都陷在临时数据需求的泥潭。

毕竟分析师是一个支撑职位，注意不断利用互惠原理和社交技巧，需要和业务线保持良好的关系，有理有据、不卑不亢，大家的目标是一样的，就是把产品做得越来越好。遇到自己不能解决的问题时，及时与自己的领导进行沟通，不要低头盲目做事，很多时候他们会看得更高，难题往往可以迎刃而解。


### 专题分析
专题分析分为 4 步:
* 需求解读: 需要充分沟通了解需求，从原始需求->了解需求->本质需求, 有时候需要和业务和产品一起深入了解他们的本质需求。
* 建立逻辑树：面对需求一定要建立合理的逻辑树，有了逻辑树才能知道具体需要分析的点是哪些。
* SQL 提数及分析：SQL 提数是所有想法验证的第一步。第二步是分析，分析由组成部分、数量比较、有何变化、各项分布、各项相关性、其他深层次的挖掘组成。总结是非常重要的。我们在写报告或者做数据分析的过程中，一定要不断地总结。
* 撰写报告的三个建议：
    * 报告一定是 90% 的图加 10% 的文，一定要以图为主，图表标题说结论
    * 结论前置，如果报告最终要呈现给领导的，那么在邮件中一定要把结论先写出来，然后报告以附件形式发送，同时在正文中也要把结论前置，节省大家时间。
    * 逻辑性一定要非常强，同时演讲的过程中也需要有故事感，站在领导的角度去想他要听什么
国企软实力: 展示力， 预判力，表现机会的时候做好相应准备营销自己。时间管理力

对于 BAT 而言，专题分析有三个特征：
* 有目标：紧贴项目 KPI；
* 有节奏：2~3 周时间输出一份完整报告；
* 有闭环：所有的报告都说人话，做人事。

### 数据异常排查
异常排查主要分三步：
* 判断是否异常：
    * 亲去看数据准确性，不要人云亦云，应该亲自查看数据是否真实。
    * 时间轴拉长，看是近期异常（3 个月）还是历史异常。一般分析师看数据时习惯看近一两周或一个月的数据，然后突然出现波峰或波谷就认为数据异常了，但实际上往往不是。我们一定要拉长时间轴，如果仍出现波峰或波谷可能就真的出现异常了。
    * 看和该指标关联的其他指标或其他核心指标是否也异常，比如 DAU 异常时，需要查看自流、渗透率是否异常，如果也异常就需要一起解决，而不是按下葫芦浮起瓢，反复做无用功。

* 最大概率法则归类：把异常问题分为了六大类，基本上所有的异常问题都归属于这六大类： 
    * 假期效应：开学季、暑假、四大节、当地节日
    * 热点事件：常规热点（世界杯）、突发热点（爆款 IP）
    * 活动影响：双 11、618，公司层面活动
    * 政策影响：互联网金融监管，快递实名；
    * 底层系统故障：数据传输、存储、清洗有无问题；
    * 统计口径：业务逻辑更改、指标计算方式更改
* 闭环：当我们排查出问题原因后，一定要形成闭环，关于闭环有三个点：
    * 持续跟踪后期数据是否再次异常，比如当我们排查出原因后，产品做相应的改进，而问题仍在就说明前期排查问题出错。
    * 记录、沉淀、文档化，因为后续我们可能还会遇到相同问题，所以记录文档利人利己。
    * 邮件化，只有确认没有问题再发邮件给相关方，描述影响范围和主要结论即可。


### 分析师发展方向
分析师有三个发展方向：
* 业务线：适合对事物感到好奇并深入研究，思维发散并且能收敛的同学，喜欢展示自我，逻辑思维较强 。
* 研发线：适合写代码的同学，喜欢安静独处，计算机功底好，天生的程序员基因 。
* 算法线：适合做研究的同学，数学功底好，因为很多时候要看各种国外论文。

业务型数据分析师的考量标准：
* 产品理解能力： 各种数据熟悉度、用户从哪里来，进来后做了什么，用户反馈最多问题是什么，竞品数据怎么样 。
* 分析方法论： 常见分析方法有哪些，A/B 测试，最大概率法则，二八定律，幸存者偏差理解怎么样。
* 可视化能力： PPT 功底怎么样，专题报告逻辑性、金字塔原理、审美怎么样。
* 演讲能力： 表达能力、讲故事能力、形象化能力、大心脏能力怎么样。
* 协作能力：跟产品、业务、研发沟通时的软技能、如何在团队中定义好自己位置并让其他人很舒服。
* 逻辑思维： 分析推导过程的全面性、合理性、价值性。
* 技术： Excel 的常见操作、SQL 熟不熟练，R 能不能搭建模型并知道有哪些问题、Python 是否能很好地用上

优化是数据分析方法论，所谓方法论是能快速从一个较全面、逻辑性、价值性的角度去分析，而不是单点无架构性分析，所有方法论都是通过不断提炼、总结、实践得出来的。这是评估一个分析师水平的重要标准。

### 数据分析整体流程
标准化流程的九个步骤：
1. 明确问题，先把问题定义清楚，因为很多人还没理清问题就直接去看数据了
2. 搭建框架，定义问题之后再把问题考虑全面、找到一条分析主线
3. 数据提取，用 MySQL、Hive 等工具提取相关数据
4. 数据处理，用 Excel、R、Python 处理数据
5. 数据分析，以数据分析方法论为主来分析数据
6. 数据展现，用 Tableau、Excel、R、Python 工具把你的数据展现出来 
7. 撰写报告，考验你的文笔功底以及整体逻辑性
8. 报告演讲，考验你沟通能力，表达能力，被提问能力。所有的报告撰写完成之后不要直接去讲，还是要和业务方进行大量的沟通，如果不提前做好沟通，你在会议或公众场合上讲时很容易被别人挑战
9. 报告闭环，这是最难也是最大价值的地方。

Excel 常用操作：
* Excel 对比分析（筛选和色阶功能）： 对比分析是数据分析中常见的一种分析方法。所有的数据只有对比才有意义，比如：新上线一个功能，怎么样评估这个功能效果，除了看功能使用人数，更要做这个功能和大盘的留存对比，如果高于大盘留存，代表这个功能有非常好的正向效应。

* Excel—时间序列拆解分析（透视图功能）：
时间序列二次拆解分析：一般看某指标时，都会把时序周期拉长，看数据趋势，而数据都是波动的，所以会进行拆解分析，寻找具体波动项，主要是用透视图功能插入透视图。简单来说就是将汇总数据拆分为不同的部分来看，比如用户总和波动，可以拆分为来自不同渠道的份别波动，这样更容易发现哪个渠道出问题。

* Excel—相关性分析： Excel 的相关性分析会用到函数功能以及加载项功能。相关性分析落实到场景是：在做某个子产品的时候，都会被问到你这个子产品对大盘的贡献度或者说影响度，这个时候就可以用相关性去说话。

* Excel 的临界点分析：对于任何一款产品，高活跃用户与低活跃用户在产品使用上必然不同，所以会存在某个指标，一旦用户在这个指标上的消费超过某个临界值时，后面用户会变得非常黏性，这就是 Magic number。

SQL 常见问题：
* Max 函数，对某一个误认为是数值型但实际是字符串型字段取最大值，采用 Max 函数，发现结果一直有错，如 13<9， -60<-70。解决方法：在 MAX 括号里面的字段加一个零，把这个字段转化为数值型再进行比较。
```
select max(a+0)
```
* 先聚合再计数，如果要计算某个维度下的用户数，不要直接算用户数 count(distinct imei)，而应该是如下代码：
```
Select city,count(1) as uv from（select city,imei,count(1) from a group by imei）t1 group by city
```
先做group by再做count
* 一列变多行，ab 测试中会对一个用户打很多标签，而这些标签都是存在一个字段中，所以要看标签维度指标，就要对该字段进行列变行拆解
```
Select *,b from t1 Lateral view explode(a) table as b
```